# Task 0

1. author finish!
2. Liicence finish! wait to explore.
3. environment finish!
4. Github Action finish! wait to learn action.
   
git删除已经存在的origin git `remote rm origin`

添加远程仓库：git remote add origin 仓库地址

这里两份代码一份是克隆了助教的库，一份是复制到自己的库（有点复杂）

# Task 1

解决了问题：关于indicatif包和在Cargo.toml中的依赖

6.20 对代码分成多个模块，增加了注释，
保持了风格的一致性并且尽量减少了不必要的克隆，对rust有了一点更深刻的理解。

使用visio给多模块的代码画出了暂时的框架图

在完成前一段时间的成果的整理之后，开始对于**前表面和后表面**和**多物体**的探究

6.21

由于后面部分代码复杂，不再适合对着代码写，所以决定只总结文字的意思而自己实现看效果

## hittable

显然一条线可能与多个物体有交点，但我们只需要最近的那个交点，所以需要把这个光线和所有物体算最近的交点取最近的

## front face and back face

给出了4张图解，分两组表示两种区分内外的形式

第一种是始终指向“外部”，第二种是始终与ray相反

我们的目的是确定光是从哪来的（两个方向应该有不一样的效果的物体很重要，如一张纸的两面）

### 第一种：始终指向外部

1. 如果ray和normal同向（点乘为正）那么是内部
2. 点乘为负，为外部

### 第二种：始终相反

显然不能点乘，但是由于我们需要存储信息。。。作为开发者，已经确定使用第一种了，所以这边不用学习了直接跳。

## object list

rust中有vector，书中聊c++特性，与我无瓜，

由于目前还不需要两面，所以先完成另外两项功能，即多物体，需要了再回来补。

存在一些小问题在于自由发挥，但是最后还算解决了，问题出在我合并了t和t——max，t可能是无穷，但不可能为负，所以判断条件要改变

## 多次采样

完成，有效果

# Diffuse Materials 漫反射材料

## 概述

漫反射材料

1. 反射问题
2. 吸收光线问题（为什么是暗色的）
3. 光线来自周围环境

实际上任何随机方向的算法都可以产生看似漫反射材料的材质

### 反射光线

在$P+n$为中心的单位球中随机取点：

**方法**：rejection method 在方块中随机取点直到在球中（考虑如何**优化**）

得到的反射光线为取得的S减去入射点P

通过递归，如果命中，那么返回反射光线是否命中的颜色（这使得颜色必然来自于背景）

### 限制子光线数量

当反射层数太多的时候返回（0，0，0）（没有色彩）

### garmma

使用了幂函数使得gamma可以调整

### 微调

shadow acne problem

t最小提高到0.001（教程为0.001）

## True Lambertian Reflection

只是把方向变成单位长度

## uniform scatter均匀散射

通过从交点随机选方向，然后如果指向内部那就反向

但是暂时不想采用，因为较复杂，且效果差不多了

# 金属

为了方便代码进行，所以在球体中增加type类型

1为漫反射，2为金属

~~~
在编写过程中发现rust的1e8这种和c中不一样
~~~

## 反射

在写代码过程中自动补全了一个n但实际上是错的，要改成单位向量，不然光线可能不反射

## 给球上色！

认为球可以

# 调整

6.22在过一天写代码之后，如果不对代码进行一个复习，很难有继续写下去的动力

所以今天先把render里很多小的功能函数移到util.rs里面，使得主次结构更清晰：main->render->ray_color

同时把render里面建立物体表的放到data::init里面

即把一些合在一起的功能都拆开，使得这个函数里面包含的功能更加单纯

再调整一下log，然后开始折射。

# 折射

tp：3

Schlick's approximation for reflectance

# 休整

经过一段小小的探索，在程序渲染结束时实现了发出声音（虽然是先生成了发出声音的exe文件然后通过command间接
发出声音）

接下来再回顾复习完成第一本书（各面异性和折射先放着不着急）

# 计划

6.24完成多线程和第一本书的debug（对每个可疑函数单独验证功能），就算第一本书完成了然后正式进入第二本书